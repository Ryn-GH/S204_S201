<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WikiEau</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body class="flex font-sans antialiased bg-gray-100">

    <div id="page-transition" class="page-transition">
        <div class="transition-content">WikiEau</div>
        <div class="loader"></div>
    </div>

    <section id="sidebar" class="sidebar fixed top-0 left-0 bg-gray-800 text-gray-100 shadow-md">
        <div id="sidebar-nav" class="sidebar-nav p-2.5">
            <ul>
                <li class="nav-item">
                    <a href="index.html" class="flex items-center p-2.5 hover:bg-gray-700 rounded-md">
                        <i class="fa fa-home mr-3 text-lg"></i> Acceuil
                    </a>
                </li>
                <li class="nav-item">
                    <a href="apropos.html" class="flex items-center p-2.5 hover:bg-gray-700 rounded-md">
                        <i class="fa fa-pencil-square-o mr-3 text-lg"></i> A propos
                    </a>
                </li>
                <li class="nav-item active">
                    <a href="#" class="flex items-center p-2.5 hover:bg-gray-700 rounded-md">
                        <i class="fa fa-line-chart mr-3 text-lg"></i> Stats
                    </a>
                </li>
                <li class="nav-item">
                    <a href="carte.html" class="flex items-center p-2.5 hover:bg-gray-700 rounded-md">
                        <i class="fa fa-map-marker mr-3 text-lg"></i> Carte
                    </a>
                </li>
            </ul>
        </div>
    </section>

    <section id="content" class="content ml-64 p-5 w-full">
        <div class="content p-5 bg-gray-100 text-pretty">
            <div class="content-header mb-5 p-5 bg-white rounded-xl shadow text-pretty">
                <h1 class="text-3xl font-bold mb-2 text-gray-800">Statistique</h1>
                <p class="text-gray-600 text-pretty">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
            </div>
            <div class="flex flex-wrap -mx-4">
                <div class="widget-box sample-widget bg-white rounded shadow m-4 w-full sm:w-1/2 md:w-1/3 lg:w-1/4">
                </div>
                <div class="chart-container bg-white rounded shadow w-full">
                    <h1>Consommation d'eau par ville</h1>
                    <canvas id="barCanvas" aria-label="Graphique de consommation d'eau par ville" role="img"></canvas>
                </div>

                <div class="widget-box sample-widget bg-white rounded shadow m-4 w-full md:w-1/2 md:w-1/3 lg:w-1/4">
                    <div class="widget-header bg-blue-500 text-white p-3 rounded-t flex justify-between items-center">
                        <h2 class="text-lg font-normal">Widget Header</h2>
                        <i class="fa fa-cog text-xl"></i>
                    </div>
                    <div class="widget-content p-4">
                        <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/87118/sample-data-1.png"
                            alt="Sample Data" class="w-full">
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script>
        // Attendre que le DOM soit entièrement chargé
        document.addEventListener('DOMContentLoaded', function () {
            // Récupérer l'élément canvas par son ID
            const barCanvas = document.getElementById("barCanvas");

            // Vérifier si l'élément canvas existe avant d'initialiser le graphique
            if (barCanvas) {
                // Création d'une nouvelle instance de Chart.js
                new Chart(barCanvas, {
                    type: "bar", // Type de graphique : barres
                    data: {
                        // Étiquettes pour l'axe des X (villes)
                        labels: ["Beijing", "Tokyo", "Seoul", "Hong Kong"],
                        datasets: [{
                            label: "Consommation d'eau (millions de litres)", // Étiquette du dataset
                            // Données pour chaque barre
                            data: [240, 120, 140, 130],
                            // Couleurs de fond pour chaque barre (utilisant des couleurs Tailwind CSS)
                            backgroundColor: [
                                '#3b82f6', // blue-500
                                '#22c55e', // green-500
                                '#ef4444', // red-500
                                '#f97316' // orange-500
                            ],
                            // Couleurs des bordures pour chaque barre
                            borderColor: [
                                '#1d4ed8',
                                '#16a34a',
                                '#dc2626',
                                '#c2410c'
                            ],
                            borderWidth: 1, // Largeur de la bordure
                            borderRadius: 8 // Arrondir les coins des barres
                        }]
                    },
                    options: {
                        responsive: true, // Le graphique s'adapte à la taille de son conteneur
                        maintainAspectRatio: false, // Ne pas maintenir le ratio d'aspect, permet une plus grande flexibilité
                        plugins: {
                            legend: {
                                display: true, // Afficher la légende
                                position: 'top', // Position de la légende
                                labels: {
                                    font: {
                                        size: 14 // Taille de la police de la légende
                                    }
                                }
                            },
                            tooltip: {
                                enabled: true // Activer les info-bulles au survol
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true, // L'axe Y commence à zéro
                                title: {
                                    display: true, // Afficher le titre de l'axe Y
                                    text: 'Volume (millions de litres)', // Texte du titre de l'axe Y
                                    font: {
                                        size: 14 // Taille de la police du titre de l'axe Y
                                    }
                                }
                            },
                            x: {
                                title: {
                                    display: true, // Afficher le titre de l'axe X
                                    text: 'Ville', // Texte du titre de l'axe X
                                    font: {
                                        size: 14 // Taille de la police du titre de l'axe X
                                    }
                                }
                            }
                        }
                    }
                });
            } else {
                // Message d'erreur si le canvas n'est pas trouvé
                console.error("L'élément canvas avec l'ID 'barCanvas' n'a pas été trouvé.");
            }
        });
    </script>
</body>

</html>